# Ultravox training configuration
name: <RUN_NAME>.eval
image: mosaicml/composer:latest
compute:
  gpus: 8
  cluster: r15z1p1
integrations:
  - integration_type: git_repo
    git_repo: fixie-ai/ultravox-expts
    git_branch: $UV_BRANCH
    pip_install: poetry==1.7.1
scheduling:
  max_duration: 2  # 2 hours max for jobs to avoid hanging jobs
command: >-
  cd ultravox-expts && poetry install --no-dev && poetry run torchrun --nproc_per_node=8 -m ultravox.tools.eval_tool $EVAL_ARGS --exp_name <RUN_NAME>.eval
env_variables:
  MLFLOW_TRACKING_URI: databricks
  UV_BRANCH: <BRANCH_NAME>
  EVAL_ARGS: --config_path ultravox/evaluation/configs/eval_config_2k.yaml --model wandb://fixie/ultravox/model-zhuang.2024-10-21-input_asr.input_asr-2c.daa1f9c:v5